2025-10-07 07:59:42 | ERROR | {"request_id": "14c8a165-5657-429c-8446-f7be4c273562", "timestamp": "2025-10-07T07:59:42.264439", "client_ip": "10.200.0.1", "endpoint": "/api/execute-query", "error_type": "HTTPException", "error_message": "403: Column KRBLF is restricted. Permission request #36 created.", "error_code": "HTTP_403", "additional_context": {"original_detail": "Column KRBLF is restricted. Permission request #36 created."}}
2025-10-07 07:59:42 | ERROR | {"request_id": "14c8a165-5657-429c-8446-f7be4c273562", "timestamp": "2025-10-07T07:59:42.278255", "client_ip": "10.200.0.1", "endpoint": "/api/execute-query", "error_type": "TypeError", "error_message": "Object of type datetime is not JSON serializable", "error_code": "INTERNAL_ERROR", "additional_context": {"traceback": "  + Exception Group Traceback (most recent call last):\n  |   File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 79, in collapse_excgroups\n  |     yield\n  |   File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 183, in __call__\n  |     async with anyio.create_task_group() as task_group:\n  |                ~~~~~~~~~~~~~~~~~~~~~~~^^\n  |   File \"C:\\service-gateway\\venv\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 781, in __aexit__\n  |     raise BaseExceptionGroup(\n  |         \"unhandled errors in a TaskGroup\", self._exceptions\n  |     ) from None\n  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n  +-+---------------- 1 ----------------\n    | Traceback (most recent call last):\n    |   File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 164, in __call__\n    |     await self.app(scope, receive, _send)\n    |   File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 85, in __call__\n    |     await self.app(scope, receive, send)\n    |   File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 182, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |                                    ~~~~~~~~~~~~~~~~~~^^\n    |   File \"C:\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    |     self.gen.throw(value)\n    |     ~~~~~~~~~~~~~~^^^^^^^\n    |   File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 85, in collapse_excgroups\n    |     raise exc\n    |   File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 184, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\service-gateway\\utils\\request_middleware.py\", line 15, in dispatch\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    |     raise app_exc\n    |   File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n    |   File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    |     raise exc\n    |   File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    |     await app(scope, receive, sender)\n    |   File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    |     await self.middleware_stack(scope, receive, send)\n    |   File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    |     await route.handle(scope, receive, send)\n    |   File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    |     await self.app(scope, receive, send)\n    |   File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n    |   File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 59, in wrapped_app\n    |     response = await handler(conn, exc)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\service-gateway\\utils\\error_handler.py\", line 59, in http_exception_handler\n    |     return JSONResponse(\n    |         status_code=exc.status_code,\n    |     ...<5 lines>...\n    |         ).dict()\n    |     )\n    |   File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\responses.py\", line 190, in __init__\n    |     super().__init__(content, status_code, headers, media_type, background)\n    |     ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\responses.py\", line 47, in __init__\n    |     self.body = self.render(content)\n    |                 ~~~~~~~~~~~^^^^^^^^^\n    |   File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\responses.py\", line 193, in render\n    |     return json.dumps(\n    |            ~~~~~~~~~~^\n    |         content,\n    |         ^^^^^^^^\n    |     ...<3 lines>...\n    |         separators=(\",\", \":\"),\n    |         ^^^^^^^^^^^^^^^^^^^^^^\n    |     ).encode(\"utf-8\")\n    |     ^\n    |   File \"C:\\Python313\\Lib\\json\\__init__.py\", line 238, in dumps\n    |     **kw).encode(obj)\n    |           ~~~~~~^^^^^\n    |   File \"C:\\Python313\\Lib\\json\\encoder.py\", line 200, in encode\n    |     chunks = self.iterencode(o, _one_shot=True)\n    |   File \"C:\\Python313\\Lib\\json\\encoder.py\", line 261, in iterencode\n    |     return _iterencode(o, 0)\n    |   File \"C:\\Python313\\Lib\\json\\encoder.py\", line 180, in default\n    |     raise TypeError(f'Object of type {o.__class__.__name__} '\n    |                     f'is not JSON serializable')\n    | TypeError: Object of type datetime is not JSON serializable\n    +------------------------------------\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 85, in __call__\n    await self.app(scope, receive, send)\n  File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 182, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n                                   ~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 85, in collapse_excgroups\n    raise exc\n  File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 184, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\service-gateway\\utils\\request_middleware.py\", line 15, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 59, in wrapped_app\n    response = await handler(conn, exc)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\service-gateway\\utils\\error_handler.py\", line 59, in http_exception_handler\n    return JSONResponse(\n        status_code=exc.status_code,\n    ...<5 lines>...\n        ).dict()\n    )\n  File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\responses.py\", line 190, in __init__\n    super().__init__(content, status_code, headers, media_type, background)\n    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\responses.py\", line 47, in __init__\n    self.body = self.render(content)\n                ~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\service-gateway\\venv\\Lib\\site-packages\\starlette\\responses.py\", line 193, in render\n    return json.dumps(\n           ~~~~~~~~~~^\n        content,\n        ^^^^^^^^\n    ...<3 lines>...\n        separators=(\",\", \":\"),\n        ^^^^^^^^^^^^^^^^^^^^^^\n    ).encode(\"utf-8\")\n    ^\n  File \"C:\\Python313\\Lib\\json\\__init__.py\", line 238, in dumps\n    **kw).encode(obj)\n          ~~~~~~^^^^^\n  File \"C:\\Python313\\Lib\\json\\encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n  File \"C:\\Python313\\Lib\\json\\encoder.py\", line 261, in iterencode\n    return _iterencode(o, 0)\n  File \"C:\\Python313\\Lib\\json\\encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\n                    f'is not JSON serializable')\nTypeError: Object of type datetime is not JSON serializable\n", "exception_type": "TypeError"}}
2025-10-07 08:22:00 | ERROR | {"request_id": "284b802c-d662-47ef-9aea-175ef16dd454", "timestamp": "2025-10-07T08:22:00.936357", "client_ip": "10.200.0.1", "endpoint": "/api/execute-query", "error_type": "HTTPException", "error_message": "403: Column OHBLF is restricted. Permission request #37 created.", "error_code": "HTTP_403", "additional_context": {"original_detail": "Column OHBLF is restricted. Permission request #37 created."}}
2025-10-07 08:23:18 | ERROR | {"request_id": "659fd3a8-528a-42c9-ae34-c35445890fa4", "timestamp": "2025-10-07T08:23:18.548925", "client_ip": "10.200.0.1", "endpoint": "/api/execute-query", "error_type": "HTTPException", "error_message": "403: Access denied to table DCPO.ORKORDRR. Permission request #39 created.", "error_code": "HTTP_403", "additional_context": {"original_detail": "Access denied to table DCPO.ORKORDRR. Permission request #39 created."}}
2025-10-07 08:24:23 | ERROR | {"request_id": "d7084b61-6f24-4021-9c37-50a3db557d9f", "timestamp": "2025-10-07T08:24:23.190536", "client_ip": "10.200.0.1", "endpoint": "/api/execute-query", "error_type": "HTTPException", "error_message": "403: Access denied to table DCPO.KRKFAKTR. Permission request #41 created.", "error_code": "HTTP_403", "additional_context": {"original_detail": "Access denied to table DCPO.KRKFAKTR. Permission request #41 created."}}
